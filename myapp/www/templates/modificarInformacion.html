<ion-view title="Modificar Informaci칩n" id="pageMI" ng-controller= "DBControllerModificarInfo" cache-view="false">
  <ion-nav-buttons side="left" class="has-header">
    <button ng-click="$ionicGoBack()" class="button back-button buttons button-clear header-item">
      <i class="icon ion-android-arrow-back"></i> <span class="back-text"></span>
    </button>
  </ion-nav-buttons>
  <ion-content padding="true" class="has-header animated fadeInRight" ng-repeat="item in selectedVehicle" style="margin: 1px 10px 0px 10px;">

    <div class="row">
      <div class="col col-100">
        <div style="margin: 0px; text-align: center;">
          <img id="fotos" src="{{item.imagen}}" style="height: 200px; width: 200px; vertical-align: middle; border-radius: 100px">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col col-50">
        <button class="button button-full button-calm icon ion-camera" ng-click="tomarFoto()"></button>
      </div>
      <div class="col col-50">
        <button class="button button-full button-calm icon ion-images" ng-click="fotoGaleria()"></button>
      </div>
    </div>

    <form id="formalias" class="list" name="formalias">

      <label class="item item-input" id="labelalias" style="margin-top: 8px">
        <span class="input-label bold">Alias:</span>
        <input type="text" value="hola" ng-model="updatedalias" name="updatedalias" id="updatedalias" ng-maxlength="20" ng-minlength="1" ng-required="true">
      </label>
      <span class="messages" ng-show="formalias.$submitted || formalias.updatedalias.$touched">
        <span ng-show="formalias.updatedalias.$error.required">El Alias es un campo requerido.</span>
        <span ng-show="formalias.updatedalias.$error.minlength || formalias.updatedalias.$error.maxlength">El alias debe tener entre 3 y 20 caracteres.</span>
      </span>

      <label class="item item-input" id="modificarInfo-input30" style="margin-top: 8px">
        <span class="input-label bold">Placa:</span>
        <input ng-model="updatedplaca" name="updatedplaca" id="updatedplaca" type="text" ng-maxlength="10" ng-minlength="5" ng-required="true">
      </label>
      <span id="mensaje" style="display: none;"></span><br>
      <span class="messages" ng-show="formalias.$submitted || formalias.updatedplaca.$touched">
        <span ng-show="formalias.updatedplaca.$error.required">La placa es un campo requerido.</span>
        <span ng-show="formalias.updatedplaca.$error.minlength || formalias.updatedplaca.$error.maxlength">La placa debe tener entre 6 y 8 caracteres.</span>
      </span>

      <div ng-repeat = "item in anteriorMarca">
        <label class="item item-select" id="agregarVehiculo-select5" style="margin-top: 8px; height: 50px; padding-top: 10px">
        <span class="input-label bold">Marca:</span>
          <select ng-model="newVehicle.idMarca" >
            <option value="" disabled selected hidden>{{item.marca}}</option>
            <option  ng-repeat="marca in registrosPlacasVehiculos | orderBy:'nombre'" value="{{marca.id}}">{{marca.nombre}}</option>
          </select>      
        </label>
      </div>

      <label class="item item-input" id="modificarInfo-input12" style="margin-top: 8px">
        <span class="input-label bold">A침o:</span>
        <input type="number" ng-model="updatedyear" id="updatedyear" name="updatedyear" ng-maxlength="4" ng-min="1950" ng-max="2017" ng-minlength="4" ng-required="false">
      </label>
      <span class="messages" ng-show="formalias.$submitted || formalias.updatedyear.$touched">
        <span ng-show="formalias.updatedyear.$error.minlength || formalias.updatedyear.$error.maxlength">El a침o debe tener 4 digitos.</span>
        <span ng-show="formalias.updatedyear.$error.min || formalias.updatedyear.$error.max">El a침o debe ser valido.</span>
      </span>

      <div ng-repeat="item in anteriorColor">
        <label class="item item-select" id="agregarVehiculo-select5" style="margin-top: 8px; height: 50px; padding-top: 10px">
        <span class="input-label bold">Color:</span>
        
          <select ng-model="newVehicle.newColor" name="newColor">
            <option value="" disabled selected hidden>{{item.color}}</option>
            <option ng-repeat="color in registrosColoresVehiculos " value="{{color.id}}">{{color.nombre}}</option>
          </select>
        </label>
      </div>
      
      <button ng-disabled="formalias.$invalid" id="modificarInfo-button5" class="button button-positive button-block" ng-click="actualizarAlias('{{item.idVehiculo}}')">Actualizar</button>
    </form>
  </ion-content>
</ion-view>
